<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Webpage</title>
    <style id="custom-css"></style>
</head>
<body>
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>

    <script>
        function compileSection(sectionData, sectionElement) {
            sectionData.forEach(item => {
                switch (item['type']) {
                    case 'title':
                        const title = document.createElement('h1');
                        title.textContent = item['text'];
                        sectionElement.appendChild(title);
                        break;
                    case 'navigation':
                        const nav = document.createElement('nav');
                        item['items'].forEach(navItem => {
                            const link = document.createElement('a');
                            link.textContent = navItem['text'];
                            link.href = navItem['url'];
                            nav.appendChild(link);
                        });
                        sectionElement.appendChild(nav);
                        break;
                    case 'heading':
                        const heading = document.createElement('h' + item['level']);
                        heading.textContent = item['text'];
                        sectionElement.appendChild(heading);
                        break;
                    case 'paragraph':
                        const paragraph = document.createElement('p');
                        paragraph.textContent = item['text'];
                        sectionElement.appendChild(paragraph);
                        break;
                    case 'image':
                        const image = document.createElement('img');
                        image.src = item['src'];
                        image.alt = item['alt'];
                        if (item['size']) {
                            image.style.width = item['size'] + 'px';
                        }
                        sectionElement.appendChild(image);
                        break;
                    case 'text':
                        const textElement = document.createElement('p');
                        textElement.textContent = item['content'];
                        sectionElement.appendChild(textElement);
                        break;
                    case 'links':
                        const linksList = document.createElement('ul');
                        item['items'].forEach(linkItem => {
                            const listItem = document.createElement('li');
                            const link = document.createElement('a');
                            link.textContent = linkItem['text'];
                            link.href = linkItem['url'];
                            listItem.appendChild(link);
                            linksList.appendChild(listItem);
                        });
                        sectionElement.appendChild(linksList);
                        break;
                    default:
                        console.error('Unknown content type:', item['type']);
                }
            });
        }

        function compileCSS(cssData) {
            const cssStyles = Object.entries(cssData).map(([selector, styles]) => {
                const styleStr = Object.entries(styles).map(([property, value]) => {
                    return `${property}: ${value};`;
                }).join('\n');
                return `${selector} { ${styleStr} }`;
            }).join('\n');
            const styleElement = document.getElementById('custom-css');
            styleElement.textContent = cssStyles;
        }

        function generateWebPage(jsonData) {
            console.log('JSON Data:', jsonData);

            const headerDiv = document.getElementById('header');
            if (jsonData['Header'] && jsonData['Header']['data']) {
                compileSection(jsonData['Header']['data'], headerDiv);
            }

            const contentDiv = document.getElementById('content');
            if (jsonData['Content']) {
                compileSection(jsonData['Content'], contentDiv);
            }

            const footerDiv = document.getElementById('footer');
            if (jsonData['Footer'] && jsonData['Footer']['data']) {
                compileSection(jsonData['Footer']['data'], footerDiv);
            }

            if (jsonData['CSS']) {
                compileCSS(jsonData['CSS']);
            }
        }

        fetch('data.json')
            .then(response => response.json())
            .then(jsonData => {
                generateWebPage(jsonData);
            })
            .catch(error => console.error('Error fetching JSON:', error));
    </script>
</body>
</html>
